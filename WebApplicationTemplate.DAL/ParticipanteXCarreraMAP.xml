<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="" xmlns="http://ibatis.apache.org/mapping">

  <alias>
    <typeAlias alias="ParticipanteXCarreraOBJ" type="WebApplicationTemplate.Objects.ParticipanteXCarreraOBJ" />
  </alias>

  <statements>
    <insert id="InsertParticipanteXCarrera" parameterClass="ParticipanteXCarreraOBJ" >

        INSERT INTO [ParticipanteXCarrera]
        (
        IdParticipante
        , IdCarrera
        , IdCategoria
        , IdRama
        , IdRuta
        , IdEquipo
				, Folio
				, FechaPago
				, FolioOffline
        )
        VALUES
        (
        #IdParticipante#
        , #IdCarrera#
        , #IdCategoria#
        , #IdRama#
        , #IdRuta#
        , #IdEquipo#
				, #Folio#
				, #FechaPago#
				, #FolioOffline#
        )

        <selectKey type="post" resultClass="int" property="IdParticipanteXCarrera">
        SELECT @@IDENTITY
      </selectKey>
    </insert>

      <select id="SelectParticipanteXCarrera" resultClass="ParticipanteXCarreraOBJ">
          SELECT 
          PxC.* 
          FROM ParticipanteXCarrera PxC 
          WHERE PxC.IdParticipanteXCarrera = #value#
      </select>

		<select id="SelectParticipanteXCarreraByIdParticipante" resultClass="ParticipanteXCarreraOBJ">
			SELECT
			PxC.*
			FROM ParticipanteXCarrera PxC
			WHERE PxC.IdParticipante = #value#
		</select>

		<update id="UpdateInfoPagoParticipante" parameterClass="ParticipanteXCarreraOBJ">
			UPDATE ParticipanteXCarrera
			SET TransactionNumber = #TransactionNumber#
			, StatusPaypal = #StatusPaypal#
			, FechaPago = #FechaPago#
			WHERE IdParticipanteXCarrera = #IdParticipanteXCarrera#
		</update>

		<select id="SelectParticipante" parameterClass="ParticipanteXCarreraOBJ" resultClass="ParticipanteXCarreraOBJ">
			<![CDATA[
          
              SELECT 
              PXC.* 
              FROM ParticipanteXCarrera PXC
              WHERE (#IdEquipo# <= 0 OR PXC.IdEquipo = #IdEquipo#)
              AND (#IdParticipante# <= 0 OR PXC.IdParticipante = #IdParticipante#)
              
          ]]>
		</select>
		
  </statements>

</sqlMap>