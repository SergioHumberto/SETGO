<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="" xmlns="http://ibatis.apache.org/mapping">

  <alias>
    <typeAlias alias="CategoriaOBJ" type="WebApplicationTemplate.Objects.CategoriaOBJ" />
  </alias>

  <statements>

    <insert id="InsertarCategoria" parameterClass="CategoriaOBJ">

      INSERT INTO Categoria
      ()
      VALUES
      ()

      <selectKey type="post" resultClass="int" property="IdCategoria">
        SELECT @@IDENTITY
      </selectKey>

    </insert>

    <select id="SelectCategoria" parameterClass="CategoriaOBJ" resultClass="CategoriaOBJ">
      <![CDATA[
      
      SELECT 
      C.* 
      FROM Categoria C
      LEFT JOIN CategoriaXCarrera CxC ON CxC.IdCategoria = C.IdCategoria
      WHERE (#IdCategoria# <= 0 OR C.IdCategoria = #IdCategoria#)
      AND (#Nombre# IS NULL OR C.Nombre = #Nombre#)
      AND (#IdCarrera# <= 0 OR CxC.IdCarrera = #IdCarrera#)

      ]]>     
    </select>

      <select id="SelectCategoriaObject" parameterClass="int" resultClass="CategoriaOBJ" >
          SELECT C.* FROM Categoria C WHERE C.IdCategoria = #value#
      </select>

  </statements>

</sqlMap>