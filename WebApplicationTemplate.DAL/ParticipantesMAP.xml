<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="" xmlns="http://ibatis.apache.org/mapping">

  <alias>
    <typeAlias alias="ParticipantesOBJ" type="WebApplicationTemplate.Objects.ParticipantesOBJ" />
  </alias>

  <statements>
    <insert id="InsertParticipante" parameterClass="ParticipantesOBJ">

      INSERT INTO [Participante]
      (
      Nombre
      , ApellidoPaterno
      , ApellidoMaterno
      , FechaNacimiento
      , Domicilio
      , Invitado
      , NumeroAccion
      , Telefono
      , Email
      , TelefonoEmergencia
      , IdEquipo
      , Pagado
      , Socio
      )
      VALUES
      (
      #Nombre#
      , #ApellidoPaterno#
      , #ApellidoMaterno#
      , #FechaNacimiento#
      , #Domicilio#
      , #Invitado#
      , #NumeroAccion#
      , #Telefono#
      , #Email#
      , #TelefonoEmergencia#
      , #IdEquipo#
      , #Pagado#
      , #Socio#
      )

      <selectKey type="post" resultClass="int" property="IdParticipante">
        SELECT @@IDENTITY
      </selectKey>
    </insert>
      
      <select id="SelectParticipanteObject" resultClass="ParticipantesOBJ"  parameterClass="int">
          SELECT P.* FROM Participante P WHERE P.IdParticipante = #value#
      </select>

      <update id="UpdateParticipante" parameterClass="ParticipantesOBJ"  >
          UPDATE Participante 
          SET Pagado = #Pagado#
          , TransactionNumber = #TransactionNumber#
          , StatusPaypal = #StatusPaypal#
          WHERE IdParticipante = #IdParticipante#
      </update>

      <select id="SelectParticipante" parameterClass="ParticipantesOBJ" resultClass="ParticipantesOBJ">
          <![CDATA[
          
              SELECT 
              P.* 
              FROM Participante P
              WHERE (#IdEquipo# <= 0 OR P.IdEquipo = #IdEquipo#)
              AND (#IdParticipante# <= 0 OR P.IdParticipante = #IdParticipante#)
              
          ]]>
      </select>
      
  </statements>
  
</sqlMap>